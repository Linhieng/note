## 🍕 注意⚠️

tsc 每次更新时，都不会自动删除无用(无关联)文件

## 🍕 未学习的语法

```ts
import type { Action } from 'element-plus'

```

## 🍕 问题

### 未解决

- 如何让 tsc -w 时, 每次都先删除 dist 文件, 在生成新的 dist 文件
- ~~json 文件更新时, dist 文件夹中对应的 json 不会更新. 换句话说, json 更新, tsc 编译时不会覆盖旧的 json ?~~ 会更新
- ~~编译生成了 .d.js~~ ?

上面两个问题都是因为 babel 去编译:

    "tsc": "tsc --noEmit --watch",
    "babel": "babel src -d dist -x \".ts\" -w",

### 已解决

- 在变量后使用 `!`, 表示该变量非空, 比如 `req.file!.filename`. [文档说明](https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-0.html#non-null-assertion-operator)

- 从一个类型转换到另一个类型 `const params = req.params as unknown as Params`

- 任意对象: `Record<string, unknown>`

- tsc 编译时, json 文件不会被代入 dist 文件夹中

  修改 `typescript.json` 文件, 确保包含以下内容
  要注意, 存在 `include` 时, 不要忘记将 ts 和 .d.ts 文件包含进去, 不然只编译 json 文件

  ```json
  {
      "include": [
          "src/**/*.ts",
          "src/**/*.d.ts",
          "src/*.json",
      ],
      "compilerOptions": {
          "resolveJsonModule": true,
      }
  }
  ```


## 🍕 导入 json 文件时提示
`Consider using '--resolveJsonModule' to import module with '.json' extension.`

解决: 在声明文件中写入:

```ts
declare module '*.json' {
  const value: any
  export default value
}
```

然后就不报错了.

然后 tsconfig.json 中有这么一个配置, 不过配置后好像没啥用

```json
"resolveJsonModule": true, /* Enable importing .json files. */
```