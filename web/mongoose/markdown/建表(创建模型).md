## ğŸ• mongoose åˆ›å»ºæ¨¡å‹æ—¶å…è®¸çš„ç±»å‹

æ¥è‡ª:
- [ä¸­æ–‡](https://mongoosejs.com/docs/schematypes.html)
- [English](http://mongoosejs.net/docs/schematypes.html)

åˆæ³•çš„  SchemaTypes:

- `String` ä»»æ„é•¿åº¦å­—ç¬¦ä¸²
- `Number` ä»»æ„æ•°å­—, åŒ…æ‹¬æ™®é€šå°æ•°>
- `Date` æ—¥æœŸ
- `Buffer` å­—èŠ‚æµ(æ–‡ä»¶?)
- `Boolean` å¸ƒå°”å€¼
- `Mixed` æ··åˆç±»å‹
- `ObjectId` å”¯ä¸€å€¼, æ˜¯ä¸€ä¸ªå¯¹è±¡, ä½†å¯è½¬æ¢ä¸º24ä½çš„å­—ç¬¦ä¸²
- `Array` æ•°ç»„
- `Decimal128` ç²¾ç¡®å°æ•°(é‡‘é¢)?
- `Map` å›¾?
- `Schema` å…¶ä»– Schema?

## ğŸ• åˆ›å»ºæ¨¡å‹

`new mongoose.Schema({})` è¿”å›ä¸€ä¸ª `Schema` å¯¹è±¡

ä¾‹å­:
```js
const schema = new Schema({
  name:    String,
  binary:  Buffer,
  living:  Boolean,
  updated: { type: Date, default: Date.now }, // æŒ‡å®šé»˜è®¤å€¼
  age:     { type: Number, min: 18, max: 65 }, // é™åˆ¶æ•°å€¼èŒƒå›´
  mixed:   Schema.Types.Mixed,
  _someId: Schema.Types.ObjectId,
  decimal: Schema.Types.Decimal128,
  array: [], // æ•°ç»„ç±»å‹
  ofString: [String],
  ofNumber: [Number],
  ofDates: [Date],
  ofBuffer: [Buffer],
  ofBoolean: [Boolean],
  ofMixed: [Schema.Types.Mixed],
  ofObjectId: [Schema.Types.ObjectId],
  ofArrays: [[]],
  ofArrayOfNumbers: [[Number]],
  nested: { // å¯¹è±¡ç±»å‹
    stuff: { type: String, lowercase: true, trim: true }
  },
  map: Map,
  mapOfString: {
    type: Map,
    of: String
  }
})

// example use

const Thing = mongoose.model('Thing', schema);

const m = new Thing;
m.name = 'Statue of Liberty';
m.age = 125;
m.updated = new Date;
m.binary = Buffer.alloc(0);
m.living = false;
m.mixed = { any: { thing: 'i want' } };
m.markModified('mixed');
m._someId = new mongoose.Types.ObjectId;
m.array.push(1);
m.ofString.push("strings!");
m.ofNumber.unshift(1,2,3,4);
m.ofDates.addToSet(new Date);
m.ofBuffer.pop();
m.ofMixed = [1, [], 'three', { four: 5 }];
m.nested.stuff = 'good';
m.map = new Map([['key', 'value']]);
m.save(callback);
```

## ğŸ• js åˆ›å»ºæ¨¡å‹

æœ€åŸºæœ¬æ­¥éª¤æ˜¯è¿™æ ·çš„:

```js
const aSchema = new mongoose.Schema({}) // åˆ›å»ºä¸€ä¸ªæ¨¡å‹ Schema
const aModel = mongoose.model('names', aSchema) // åˆ›å»ºè¯¥æ¨¡å‹çš„æ„é€ å‡½æ•°
const aDocument = new aModel({}) // ä½¿ç”¨æ„é€ å‡½æ•°ç”Ÿæˆæ•°æ®
aDocument.save() // å°†æ•°æ®ä¿å­˜åˆ°æ•°æ®åº“ä¸­
```

## ğŸ• ts åˆ›å»ºæ¨¡å‹

æœ€åŸºæœ¬çš„æ­¥éª¤æ˜¯è¿™æ ·çš„:

```js
interface I = {} // é€šå¸¸å…ˆä½¿ç”¨æ¥å£å®šä¹‰å¥½ç»“æ„
const aSchema = new mongoose.Schema<I>({}) // åœ¨ js çš„åŸºç¡€ä¸Šä½¿ç”¨æ³›å‹, åŒæ—¶è¦ç¡®ä¿å®šä¹‰çš„ç»“æ„å’Œæ¥å£çš„ä¸€è‡´
const aModel = mongoose.model<I>('names', aSchema) // åœ¨ js åœ¨åŸºç¡€ä¸Šä½¿ç”¨äº†æ³›å‹
const aDocument = new aModel({}) // å’Œ js ä¸€è‡´
aDocument.save()
```